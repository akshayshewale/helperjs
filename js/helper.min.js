window.addEventListener("load",function(){include()});const getQueryString=(file,headerOfIds,arrayOfId,headerOfNames=[],arrayOfNames=[])=>{var qs=file+"?submit=true";getValuesByIds(arrayOfId).forEach((val,i)=>{qs+="&"+headerOfIds[i]+"="+val})
getValuesByNames(arrayOfNames).forEach((nameVal,i)=>{nameVal.forEach((val)=>{qs+="&"+headerOfNames[i].replace("[]")+"[]="+val})})
return qs}
const getDataToIds=(qs,arrayOfIds,splitBy="##")=>{fetch(qs).then(res=>res.text()).then(data=>{data.split(splitBy).forEach((val,i)=>{var elem=document.getElementById(arrayOfIds[i]);hasValue(elem)?elem.value=val:elem.innerHTML=val})})}
const include=()=>{var tags=document.getElementsByTagName("include");for(var i=0;i<tags.length;i++){var elem=tags[i];fetch(elem.getAttribute("file")+"?&idForReq="+elem.getAttribute("to")).then(es=>{es.text().then(ex=>{document.getElementById(es.url.split("?&").pop().split("=").pop()).innerHTML=ex})})}}
const validator=(type,value)=>{try{switch(type){case "phone":return value.length==10&&/^[7-9][0-9]{9}$/.test(value);break;case "number":try{let x=parseInt(value)
return!0}catch(e){return!1}
break;case "email":return/^[\w\.=-]+@[\w\.-]+\.[\w]{2,5}$/.test(value)
break;case "name":for(let i=0;i<value.length;i++){let code=value[i].charCodeAt(0);if(!((code>=65&&code<=90)||(code>=97&&code<=122)||code==32)){return!1}}
return!0;break;case "isNotNull":return!((value.length==0)||(value=="")||value==null||value==undefined);break;case "radio"||"checkbox":getValuesByNames([value])[0].forEach(function(e){if(validator("isNotNull",e)){return!0}});return!1;break;default:throw `Not Handling ${type} validations for Value ${value} please contact the developers`}
return!1}catch(e){return!1}}
const getValuesByIds=(arrayOfIds)=>{return arrayOfIds.map(id=>hasValue(document.getElementById(id))?document.getElementById(id).value:document.getElementById(id).innerHTML)}
const getValuesByNames=(arrayOfNames)=>{return arrayOfNames.map(name=>{var elems=document.getElementsByName(name)
var miniArray=[];for(var i=0;i<elems.length;i++){if(elems[i].multiple){let options=elems[i].selectedOptions
let insStr=[];for(let k=0;k<options.length;k++){if(validator("isNotNull",options[k].value)){insStr.push(options[k].value)}}
miniArray.push(insStr.join(","))}else{var flag=!0;try{flag=elems[i].getAttribute("type").toString().toLowerCase()=="checkbox"||elems[i].getAttribute("type").toString().toLowerCase()=="radio"}catch(e){flag=!1}
if(flag){miniArray.push(elems[i].checked?elems[i].value:!1)}else if(hasValue(elems[i])){if(validator("isNotNull",elems[i].value)){miniArray.push(elems[i].value)}}else{if(validator("isNotNull",elems[i].innerHTML)){miniArray.push(elems[i].innerHTML)}}}};return miniArray})}
const hasValue=(elem)=>{return["INPUT","SELECT","TEXTAREA"].includes(elem.tagName.toUpperCase())}
const filterTable=(tableId,searchBy)=>{document.getElementById(searchBy).addEventListener("keyup",e=>{var text=e.srcElement.value;var tbody=document.getElementById(tableId).getElementsByTagName("tr");for(var rows=0;rows<tbody.length;rows++){(tbody[rows].innerHTML.toLowerCase().search(text.toLowerCase())!=-1)?tbody[rows].style.display="block":tbody[rows].style.display="none"}})}
const filterElements=(parentId,searchBy)=>{document.getElementById(searchBy).addEventListener("keyup",e=>{var text=e.srcElement.value;var children=document.getElementById(parentId).children;for(var index=0;index<children.length;index++){(children[index].innerHTML.toLowerCase().search(text.toLowerCase())!=-1)?children[index].style.display="block":children[index].style.display="none"}})}
const checkRequiredIds=(arrayOfIds)=>{let flag=!0
arrayOfIds.forEach(id=>{var elem=document.getElementById(id);if(hasValue(elem)){if(!validator("isNotNull",elem.value)){flag=!1}}else{if(!validator("isNotNull",elem.innerHTML)){flag=!1}}});return flag}
const checkRequiredNames=(arrayOfNames)=>{for(let j=0;j<arrayOfNames.length;j++){let name=arrayOfNames[j];let isFilled=!1;let elem=document.getElementsByName(name);for(var i=0;i<elem.length;i++){if(hasValue(elem[i])){if(validator("isNotNull",elem[i].value)){isFilled=!0}}else{if(validator("isNotNull",elem[i].innerHTML)){isFilled=!0}}}
if(!isFilled){return!1}}
return!0}
const local=(name,value)=>{return validator("isNotNull",value)?window.localStorage.setItem(name,value):(window.localStorage.getItem(name))}
const session=(name,value)=>{return validator("isNotNull",value)?window.sessionStorage.setItem(name,value):(window.sessionStorage.getItem(name))}
const replaceInString=(mainString,replaceString,replaceWith)=>{let strArray=mainString.split(replaceString);let ret=strArray[0];for(let i=1;i<strArray.length;i++){ret=ret.concat(replaceWith.toString().concat(strArray[i]))}
return ret}
const createDynamicElement=(parentId,replaceString="##")=>{let parentElem=document.getElementById(parentId);parentElem.children[0].style.display="none"
let children=parentElem.children[0].innerHTML.replace("\n","")
let str="<div>"+replaceInString(children,replaceString,parentElem.childElementCount)+"</div>";parentElem.insertAdjacentHTML("beforeend",str)}